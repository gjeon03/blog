---
title: "Web APIë¡œ ìŒì„± ë…¹ìŒ ê¸°ëŠ¥ ë§Œë“¤ê¸° (MediaRecorder í™œìš©)"
publishedAt: "2025-06-15"
summary: "MediaRecorderë¥¼ í™œìš©í•œ ì›¹ ìŒì„± ë…¹ìŒ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì œì™€ Hook ê¸°ë°˜ì˜ í™œìš©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤."
tags: ["media-recorder", "web-api", "react", "typescript"]
---

ì›¹ì—ì„œ ìŒì„±ì„ ë…¹ìŒí•˜ê³  íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì€ `MediaRecorder` APIë¥¼ í™œìš©í•˜ë©´ ë¹„êµì  ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. React ê¸°ë°˜ í”„ë¡œì íŠ¸ì—ì„œ ë§ˆì´í¬ ì…ë ¥ì„ ë°›ì•„ ë…¹ìŒí•˜ê³ , ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ ì˜¤ë””ì˜¤ íŒŒì¼ë¡œ ë§Œë“œëŠ” íë¦„ì„ í›… í˜•íƒœë¡œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

---

# êµ¬í˜„ì˜ˆì‹œ

## 1. VoiceRecorder

```tsx
//voice-recorder.tsx
import { useState } from "react";
import { useVoiceRecorder } from "@/hooks/use-voice-recorder";
import { downloadBlob } from "@/utils/download-blob";

export default function VoiceRecorder() {
  const [audioBlob, setAudioBlob] = useState<Blob>();
  const { isRecording, startRecording, stopRecording } = useVoiceRecorder({
    onComplete: (blob) => {
      console.log("ë…¹ìŒ ì™„ë£Œ!", blob);
      setAudioBlob(blob);
    },
  });

  const handleDownload = () => {
    if (audioBlob) {
      downloadBlob(audioBlob, `voice-${Date.now()}.webm`);
    }
  };

  const handleToggleRecording = () => {
    if (isRecording) {
      stopRecording();
    } else {
      startRecording();
    }
  };

  return (
    <div className="flex flex-col items-center justify-center h-screen gap-4 px-4 text-center">
      <h1 className="text-2xl font-bold">Voice Recorder</h1>
      <button
        className={`px-4 py-2 text-white rounded cursor-pointer w-48 ${
          isRecording ? "bg-red-500" : "bg-blue-500"
        }`}
        onClick={handleToggleRecording}
      >
        {isRecording ? "Stop" : "Start"} Recording
      </button>
      <button
        className="px-3 py-1 bg-green-500 text-white rounded disabled:opacity-50"
        onClick={handleDownload}
        disabled={!audioBlob}
      >
        ğŸ“¥ ë‹¤ìš´ë¡œë“œ
      </button>
    </div>
  );
}
```

## 2. useVoiceRecorder

```tsx
//use-voice-recorder.ts
import { useRef, useState } from "react";

export function useVoiceRecorder({
  onComplete,
}: {
  onComplete: (blob: Blob) => void;
}) {
  const mediaRecorderRef = useRef<MediaRecorder | null>(null);
  const [isRecording, setIsRecording] = useState(false);
  const chunksRef = useRef<Blob[]>([]);

  const startRecording = async () => {
    if (!navigator.mediaDevices?.getUserMedia) {
      console.error("getUserMedia not supported");
      return;
    }

    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      const recorder = new MediaRecorder(stream);

      chunksRef.current = [];

      recorder.ondataavailable = (e) => {
        chunksRef.current.push(e.data);
      };

      recorder.onstop = () => {
        const blob = new Blob(chunksRef.current, { type: "audio/webm" });
        onComplete(blob);
        stream.getTracks().forEach((track) => track.stop());
      };

      mediaRecorderRef.current = recorder;
      recorder.start();
      setIsRecording(true);
    } catch (err) {
      console.error("Microphone error", err);
    }
  };

  const stopRecording = () => {
    if (mediaRecorderRef.current?.state === "recording") {
      mediaRecorderRef.current.stop();
      setIsRecording(false);
    }
  };

  return {
    isRecording,
    startRecording,
    stopRecording,
  };
}
```

## 3. downloadBlob

```tsx
//download-blob.ts
export function downloadBlob(blob: Blob, filename: string) {
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");

  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();

  setTimeout(() => {
    URL.revokeObjectURL(url);
    document.body.removeChild(a);
  }, 100);
}
```

# ìš”ì•½ ì„¤ëª…

### **1. Media Stream ìš”ì²­**

```tsx
const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
```

- ë¸Œë¼ìš°ì €ê°€ ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œì„ ìš”ì²­í•˜ë©°, ì´ ìŠ¤íŠ¸ë¦¼ì€ ë…¹ìŒì— ì‚¬ìš©ë©ë‹ˆë‹¤.
- videoê¹Œì§€ ë…¹ìŒí•˜ë ¤ë©´ `{ video: true }`ë„ ê°€ëŠ¥.

### 2. **`MediaRecorder` ì‚¬ìš©**

- `MediaRecorder`ëŠ” `MediaStream`ì„ ì…ë ¥ë°›ì•„ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ë…¹ìŒì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- `start()`, `stop()` ë“±ì˜ ë©”ì„œë“œë¥¼ í†µí•´ ë…¹ìŒì„ ì œì–´

### 3. **`ondataavailable` ì´ë²¤íŠ¸**

- ë…¹ìŒ ì¤‘ ì¼ì • ì‹œê°„ë§ˆë‹¤ ë˜ëŠ” `stop()` ì‹œì ì— í˜¸ì¶œë˜ëŠ” ì´ë²¤íŠ¸
- `recorder.start(1000)`ìœ¼ë¡œ ì„¤ì • ì‹œ, 1ì´ˆë§ˆë‹¤ ë°ì´í„°ë¥¼ chunk ë‹¨ìœ„ë¡œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬, ëŒ€ìš©ëŸ‰ ë°ì´í„° ë‚˜ëˆ  ì €ì¥, ìŒì„± ì¸ì‹ ë“± ì‹¤ì‹œê°„ ì²˜ë¦¬ ë“±ì— ì‚¬ìš©

### 4. **ìŠ¤íŠ¸ë¦¼ ì¢…ë£Œ ì²˜ë¦¬**

```tsx
stream.getTracks().forEach((track) => track.stop());
```

- `mediaRecorder.stop()`ë§Œìœ¼ë¡œëŠ” ë¸Œë¼ìš°ì € ìƒë‹¨ì˜ ë§ˆì´í¬ ì‚¬ìš© ì•„ì´ì½˜ì´ ì‚¬ë¼ì§€ì§€ ì•Šê±°ë‚˜, ìŠ¤íŠ¸ë¦¼ì´ ê³„ì† ìœ ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ ëª…ì‹œì ìœ¼ë¡œ ë§ˆì´í¬ íŠ¸ë™ì„ ì¢…ë£Œí•´ì£¼ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•©ë‹ˆë‹¤.

# ì‘ë™ ì˜ˆì œ

<iframe
  src="https://codesandbox.io/embed/8fnl37?view=preview&module=%2Fsrc%2FApp.tsx&hidenavigation=1"
  style={{
    width: "100%",
    height: "300px",
    border: "1px #000 solid",
    borderRadius: "4px",
    overflow: "hidden",
  }}
  title="voice-input-check"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-downloads allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
/>

# Reference

- [MDN Using the MediaStream Recording API](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API)
- [MDN MediaRecorder](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder)
